{% extends "rosetta/pofile.html" %}
{% load rosetta i18n %}

{% block head_extra %}
<style type="text/css" media="screen">
    {% include 'rosetta/gcinui/gcinui.css' %}
    {% include 'rosetta/gcinui/form.css' %}
</style>
<script type="text/javascript">
//<!--
    {% include 'rosetta/gcinui/gcinui.js' %}
    gcinuiInit({'LOCALE': 'en'});
//-->
</script>
{# <script src="http://localhost:9810/compile?id=gcinui&mode=raw" charset="UTF-8"></script> #}
{% endblock %}


{% block body_end %}
    <script>
        gcinui.install();
    </script>
{% endblock %}

{% block header %}
    {{block.super}}
    <h4>Singlepage</h4>
{% endblock %}

{% block main %}
    <div>кыздун!</div>
    {{block.super}}
{% endblock %}


{% block msg_table %}
    <table>
        <thead>
            <tr>
                {% rosetta_csrf_token %}
                <th><div class="text">{% trans "Original" %}</div></th>
                {% if main_language %}<th>{{ main_language }}</th>{% endif %}
                <th>{{ rosetta_i18n_lang_name }}</th>
                <th></th>
                <th class="c"><span class="checkall">[-]</span> {% trans "Fuzzy" %}</th>
            </tr>
        </thead>
        <tbody>
            {% for message in rosetta_messages %}
            <tr class="msgrow {% cycle row1,row2 %}">
                {% if message.msgid_plural %}
                    <td class="original plural">
                        <div class="plural-container">
                            <span class="part">{{message.msgid|format_message|linebreaksbr}}</span>
                            <span class="part">{{message.msgid_plural|format_message|linebreaksbr}}</span>
                        </div>

                        {% if message.msgctxt %}
                            <span class="context">{% trans "Context hint" %}: {{message.msgctxt|safe}}</span>
                        {% else %}
                            {% if message.comment %}
                            <span class="context">{% trans "Context hint" %}: {{message.comment|safe}}</span>
                            {% endif %}
                        {% endif %}

                    </td>
                    <td class="translation">
                        <ul>
                            {% for k, msgstr in message.msgstr_plural.items|dictsort:"0"  %}
                                <li>
                                    <label for="m_{{message.md5hash}}_{{k}}">{{k}}:</label>
                                    <textarea rows="{{message.msgid|format_message|lines_count}}" cols="40" id="m_{{message.md5hash}}_{{k}}" name="m_{{message.md5hash}}_{{k}}" tabindex="{% increment tab_idx %}">{{msgstr}}</textarea>
                                </li>
                            {% endfor %}
                        </ul>
                    </td>
                {% else %}
                    <td class="original">
                    {% if message.msgctxt %}
                        <span class="context">
                            {% if message.comment %}
                            {{message.comment|safe}}<br/>
                            {% endif %}
                            {{message.msgctxt|safe}}
                        </span>
                    {% endif %}

                    {% with message.msgctxt|slice:":13" as has_formatter %}
                        {% if has_formatter == "HAS FORMATTER" %}
                            <span class="message message-with-formatter">{{ message.msgid|format_message }}</span>
                        {% else %}
                            <span class="message">{{ message.msgid|format_message }}</span>
                        {% endif %}
                    {% endwith %}

                    </td>
                    {% if main_language %}<td class="original">{{ message.main_lang|format_message|linebreaksbr }}</td>{% endif %}
                    <td class="translation">
                        <textarea class="textarea-translation" rows="{{message.msgid|format_message|lines_count}}" cols="40" name="m_{{message.md5hash}}" tabindex="{% increment tab_idx %}">{{message.msgstr}}</textarea>
                        {% if ENABLE_TRANSLATION_SUGGESTIONS %}<a href="#" class="suggest">{% trans "suggest" %}</a>{% endif %}
                    </td>
                {% endif %}
                <td class="gcinuielper"></td>
                <td class="c">
                    <input type="checkbox" name="f_{{message.md5hash}}" value="1" {% if message|is_fuzzy %}checked="checked"{% endif %} />
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}